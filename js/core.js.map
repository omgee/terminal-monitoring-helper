{
  "version": 3,
  "file": "core.js",
  "sourceRoot": "",
  "sources": [
    "core.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class App\r\n\r\n  @ticketEdit: document.querySelector '#ticketEdit'\r\n  @ticketDone: document.querySelector '#ticketDone'\r\n  @copyButton: document.querySelector '#copyButton'\r\n  @clearButton: document.querySelector '#clearButton'\r\n  @autoStatus: document.querySelector '#autoStatus'\r\n  @manualStatus: document.querySelector '#manualStatus'\r\n\r\n  @statuses: [\r\n    'Статус=0 (Ожидание проведения)',\r\n    'Статус=7 (Платеж завершен)',\r\n    'Статус=1 (Платеж проводится)',\r\n    'Статус=100 (Платеж не проведен)',\r\n    'Статус=120 (Платеж заблокирован при обработке)',\r\n    'Статус=112 (Платеж проведен оффлайн)',\r\n    'Статус=102 (Платеж отменен вручную)'\r\n  ]\r\n  @errors: [\r\n    'Ошибка=3003 (Превышен дневной лимит)',\r\n    'Ошибка=1200200 (Откат транзакции)',\r\n    'Ошибка=1220140 (Ошибочный номер абонента)',\r\n    'Ошибка=1220117 (Недостаточно средств на счету дилера для проведения этого платежа)',\r\n    'Ошибка=1200002 (Состояние платежа неизвестно, сбой при осуществлении платежа в биллинг провайдера (в последствии состояние будет изменено на проведен или на один из откатов))',\r\n    'Ошибка=53 (Точка заблокирована)',\r\n    'Ошибка=1200200 (Откат транзакции)'\r\n  ]\r\n\r\n  @init: () ->\r\n    @copyButton.addEventListener 'click', @copy\r\n    @clearButton.addEventListener 'click', @clear\r\n    @ticketEdit.addEventListener 'keyup', @editListener\r\n    return\r\n\r\n  @copy: () ->\r\n    App.ticketDone.select()\r\n    document.execCommand 'copy'\r\n    return\r\n\r\n  @clear: () ->\r\n    App.ticketEdit.value = '';\r\n    App.ticketDone.value = '';\r\n    return\r\n\r\n  @changeStatus: (element) ->\r\n    console.log element\r\n    @autoStatus.classList.remove 'active'\r\n    @manualStatus.classList.remove 'active'\r\n    element.classList.add 'active'\r\n    return\r\n\r\n  @manualMode: (value) ->\r\n    dateObj = new Date()\r\n    [terminal, date, amount, number, operator, comment] = value.split(\"\\n\");\r\n    amount = '' if amount is undefined\r\n    amount += '.00'\r\n    date = '' if date is undefined\r\n    getDate = dateObj.getDate()\r\n    getMonth = dateObj.getMonth() + 1\r\n    getFullYear = dateObj.getFullYear()\r\n    getDate = \"0#{getDate}\" if getDate < 10\r\n    getMonth = \"0#{getMonth}\" if getMonth < 10\r\n    if date.indexOf('.') is -1\r\n      date = \"#{getDate}.#{getMonth}.#{getFullYear} #{date}\"\r\n    @ticketDone.value = @genTicket(terminal, date, amount, number, operator, comment, -1, -1)\r\n    return\r\n\r\n  @autoMode: (value) ->\r\n    valuesArray = value.split ';'\r\n    terminal = valuesArray[1]\r\n    date = valuesArray[2]\r\n    amount = valuesArray[6] + '.00'\r\n    number = valuesArray[4]\r\n    error = valuesArray[10]\r\n    status = valuesArray[9]\r\n    numberPattern = /\\d{6,}/\r\n    number = number.match numberPattern\r\n    operator = valuesArray[5]\r\n    @ticketDone.value = @genTicket(terminal, date, amount, number, operator, '', status, error)\r\n    return\r\n\r\n  @getStatus: (val) ->\r\n    for status in @statuses\r\n      if status.indexOf(\"Статус=#{val}\") isnt -1\r\n        return status\r\n    return ''\r\n\r\n  @getError: (val) ->\r\n    for error in @errors\r\n      if error.indexOf(\"Ошибка=#{val}\") isnt -1\r\n        return error\r\n    return ''\r\n\r\n  @editListener: () ->\r\n    value = App.ticketEdit.value\r\n    if value.indexOf(';') isnt -1\r\n      App.changeStatus App.autoStatus\r\n      App.autoMode value\r\n    else\r\n      App.changeStatus App.manualStatus\r\n      App.manualMode value\r\n    return\r\n\r\n  @genTicket: (terminal = '', date = '', amount = '', number = '', operator = '', comment = '', status, error) ->\r\n    status = @getStatus status\r\n    error = @getError error\r\n    return \"Терминал: #{terminal}\\nДата/время: #{date}\\nСумма: #{amount}\\nНомер счета/телефона: #{number}\\nВерный номер счета/телефона:\\nСервис/Оператор: #{operator}\\nВерный Сервис/Оператор:\\nКомментарий: #{comment}\\n#{status}\\n#{error}\"\r\n\r\nApp.init()"
  ]
}