{
  "version": 3,
  "file": "core.js",
  "sourceRoot": "",
  "sources": [
    "core.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class App\r\n\r\n  @ticketEdit: document.querySelector '#ticketEdit'\r\n  @ticketDone: document.querySelector '#ticketDone'\r\n  @copyButton: document.querySelector '#copyButton'\r\n  @clearButton: document.querySelector '#clearButton'\r\n  @autoStatus: document.querySelector '#autoStatus'\r\n  @manualStatus: document.querySelector '#manualStatus'\r\n\r\n  @ownerStatus: document.querySelector '#ownerStatus'\r\n  @owners: [\r\n    '87654491:9057765572',\r\n    '354:9250511492',\r\n    '15121045:9150305000',\r\n    '495:9264300299',\r\n    '9888549:9060965746',\r\n    '314:9640088004',\r\n    '513:9264300299',\r\n    '9887417:9250511492',\r\n    '496:9264300299',\r\n    '552:9640088084',\r\n    '9888542:9269174337',\r\n    '8765476:87654761',\r\n    '399:9803431231',\r\n    '107:9129762003',\r\n    '87654958:9851421603',\r\n    '9458936:9285551027',\r\n    '87654401:9626461645',\r\n    '497:9264300299',\r\n    '343:9288013005',\r\n    '889522:9289414041',\r\n    '109:9129762003',\r\n    '87654781:9207891111',\r\n    '400:9803431231',\r\n    '87654878:9285049405',\r\n    '15121205:9647894278',\r\n    '87654490:9057765572',\r\n    '9887645:9212056430',\r\n    '225:9260152710',\r\n    '9887454:9653376277'\r\n  ]\r\n\r\n  @statuses: [\r\n    'Статус=0 (Ожидание проведения)',\r\n    'Статус=7 (Платеж завершен)',\r\n    'Статус=1 (Платеж проводится)',\r\n    'Статус=100 (Платеж не проведен)',\r\n    'Статус=108 (Платеж проведен вручную)',\r\n    'Статус=120 (Платеж заблокирован при обработке)',\r\n    'Статус=112 (Платеж проведен оффлайн)',\r\n    'Статус=102 (Платеж отменен вручную)',\r\n    'Статус=103 (Запрос на ручную отмену платежа)'\r\n  ]\r\n  @errors: [\r\n    'Ошибка=3003 (Превышен дневной лимит)',\r\n    'Ошибка=1200200 (Откат транзакции)',\r\n    'Ошибка=1200500 (Откат транзакции)',\r\n    'Ошибка=1220110 (Оплата в пользу сервис-провайдера невозможна)',\r\n    'Ошибка=1220140 (Ошибочный номер абонента)',\r\n    'Ошибка=1220117 (Недостаточно средств на счету дилера для проведения этого платежа)',\r\n    'Ошибка=1200002 (Состояние платежа неизвестно, сбой при осуществлении платежа в биллинг провайдера (в последствии состояние будет изменено на проведен или на один из откатов))',\r\n    'Ошибка=53 (Точка заблокирована)',\r\n    'Ошибка=1220002 (Платеж в обработке)',\r\n    'Ошибка=1200300 (Недостаточно денег на счете дилера)',\r\n    'Ошибка=1220103 (Не найдена касса, соответствующая этому пользователю)',\r\n    'Ошибка=1220000 (Платеж в очереди)',\r\n    'Ошибка=2002 (Сетевая ошибка)'\r\n  ]\r\n\r\n  @init: () ->\r\n    @copyButton.addEventListener 'click', @copy\r\n    @clearButton.addEventListener 'click', @clear\r\n    @ticketEdit.addEventListener 'keyup', @editListener\r\n    return\r\n\r\n  @copy: () ->\r\n    App.ticketDone.select()\r\n    document.execCommand 'copy'\r\n    return\r\n\r\n  @clear: () ->\r\n    App.ticketEdit.value = '';\r\n    App.ticketDone.value = '';\r\n    App.changeOwner 'Нет'\r\n    App.changeStatus()\r\n    return\r\n\r\n  @changeStatus: (element) ->\r\n    if element is undefined\r\n      element = @manualStatus\r\n    @autoStatus.classList.remove 'active'\r\n    @manualStatus.classList.remove 'active'\r\n    element.classList.add 'active'\r\n    return\r\n\r\n  @changeOwner: (number) ->\r\n    @ownerStatus.innerHTML = number;\r\n    return\r\n\r\n  @manualMode: (value) ->\r\n    dateObj = new Date()\r\n    [terminal, date, amount, number, operator, comment] = value.split(\"\\n\");\r\n    @changeOwner(@getOwner(terminal.split(' ')[0]))\r\n    terminal = terminal.split(' ').join(' / ')\r\n    number = '' if number is undefined\r\n    operator = '' if operator is undefined\r\n    amount = '' if amount is undefined\r\n    number = number.split(' ').join(' / ')\r\n    operator = operator.split(' ').join(' / ')\r\n    amount = '' if amount is undefined\r\n    amount = (\"#{am}.00\" for am in amount.split(' '))\r\n    amount = amount.join(' / ')\r\n    date = '' if date is undefined\r\n    genDate = (date) ->\r\n      getDate = dateObj.getDate()\r\n      getMonth = dateObj.getMonth() + 1\r\n      getFullYear = dateObj.getFullYear()\r\n      getDate = \"0#{getDate}\" if getDate < 10\r\n      getMonth = \"0#{getMonth}\" if getMonth < 10\r\n      if date.indexOf('.') is -1\r\n        return date = \"#{getDate}.#{getMonth}.#{getFullYear} #{date}\"\r\n      else\r\n        return date\r\n    dates = (genDate da for da in date.split(' '))\r\n    dates = dates.join(' / ')\r\n    @ticketDone.value = @genTicket(terminal, dates, amount, number, operator, comment, -1, -1)\r\n    return\r\n\r\n  @autoMode: (value) ->\r\n    Array::unique = ->\r\n      output = {}\r\n      output[@[key]] = @[key] for key in [0...@length]\r\n      value for key, value of output\r\n    value = value.replace(/^\\s+|\\s+$/g, '');\r\n    terminal = []\r\n    date = []\r\n    amount = []\r\n    number = []\r\n    numberPattern = /\\d{6,}/\r\n    operator = []\r\n    error = ''\r\n    status = ''\r\n    for val in value.split(\"\\n\")\r\n      valuesArray = val.split ';'\r\n      terminal.push valuesArray[1]\r\n      date.push valuesArray[2]\r\n      amount.push valuesArray[6] + '.00'\r\n      number.push valuesArray[4].match numberPattern\r\n      operator.push valuesArray[5]\r\n      status = valuesArray[9]\r\n      error = valuesArray[10]\r\n    terminal = terminal.unique()\r\n    @changeOwner @getOwner(terminal[0])\r\n    date = date.unique()\r\n    number = number.unique()\r\n    operator = operator.unique()\r\n    terminal = terminal.join(' / ')\r\n    date = date.join(' / ')\r\n    amount = amount.join(' / ')\r\n    number = number.join(' / ')\r\n    operator = operator.join(' / ')\r\n    @ticketDone.value = @genTicket(terminal, date, amount, number, operator, '', status, error)\r\n    return\r\n\r\n  @getStatus: (val) ->\r\n    for status in @statuses\r\n      if status.indexOf(\"Статус=#{val}\") isnt -1\r\n        return status\r\n    return ''\r\n\r\n  @getError: (val) ->\r\n    for error in @errors\r\n      if error.indexOf(\"Ошибка=#{val}\") isnt -1\r\n        return error\r\n    return ''\r\n\r\n  @editListener: () ->\r\n    value = App.ticketEdit.value\r\n    if value.indexOf(';') isnt -1\r\n      App.changeStatus App.autoStatus\r\n      App.autoMode value\r\n    else\r\n      App.changeStatus App.manualStatus\r\n      App.manualMode value\r\n    return\r\n\r\n  @getOwner: (terminal) ->\r\n    for val in @owners\r\n      if val.split(':')[0] is terminal\r\n        return val.split(':')[1]\r\n    return 'Нет'\r\n\r\n  @genTicket: (terminal = '', date = '', amount = '', number = '', operator = '', comment = '', status, error) ->\r\n    status = @getStatus status\r\n    error = @getError error\r\n    return \"Терминал: #{terminal}\\nДата/время: #{date}\\nСумма: #{amount}\\nНомер счета/телефона: #{number}\\nВерный номер счета/телефона:\\nСервис/Оператор: #{operator}\\nВерный Сервис/Оператор:\\nКомментарий: #{comment}\\n#{status}\\n#{error}\"\r\n\r\nApp.init()"
  ]
}